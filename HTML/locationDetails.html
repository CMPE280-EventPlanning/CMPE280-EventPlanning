<!-- === BEGIN HEADER === -->
<!DOCTYPE html>
<!--[if IE 8]> <html lang="en" class="ie8"> <![endif]-->
<!--[if IE 9]> <html lang="en" class="ie9"> <![endif]-->
<!--[if !IE]><!-->
<html lang="en">
    <!--<![endif]-->
    <head>
    	<link rel="icon" href="./assets/img/icon.PNG" type="image/png">
        <title>Eclectic - Location Details.</title>
        <!-- Meta -->
        <meta http-equiv="content-type" content="text/html; charset=utf-8" />
         <meta name="description" content="Know more about the venue details and also get a virtual tour of the venue.">
        <meta name="keyword" content="Eclectic,AWS Event Planners, SJSU, CMPE 280,Virtual Reality 					        Tour,Business,Wedding,Cultural,Birthday,Services, Venue">
        <meta name="author" content="Divya Nair,Pooja Prabhuswamy,Usha Boddeda,Varsha Kodali">
        <meta name="google-site-verification" content="googleef63d5d366b9aeb5">
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
        
        <!-- Bootstrap Core CSS -->
        <link rel="stylesheet" href="./assets/css/bootstrap.css" rel="stylesheet">
        <!-- Template CSS -->
        <link rel="stylesheet" href="./assets/css/animate.css" rel="stylesheet">
        <link rel="stylesheet" href="./assets/css/font-awesome.css" rel="stylesheet">
        <link rel="stylesheet" href="./assets/css/nexus.css" rel="stylesheet">
        <link rel="stylesheet" href="./assets/css/responsive.css" rel="stylesheet">
        <link rel="stylesheet" href="./assets/css/custom.css" rel="stylesheet">
        <!-- Google Fonts-->
        <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Open Sans:300,400" />
        <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Source Sans Pro:300,400" />
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
		<script type="text/javascript" src="assets/js/scripts.js"></script>
			<script src="./assets/js/bootstrap-datepicker.js"></script>
         <script type="text/javascript">
             var datefield=document.createElement("input")
             datefield.setAttribute("type", "date")
             if (datefield.type!="date"){ //if browser doesn't support input type="date", load files for jQuery UI Date Picker
                 document.write('<link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/jquery-ui.css" rel="stylesheet" type="text/css" />\n')
                 document.write('<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4/jquery.min.js"><\/script>\n')
                 document.write('<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js"><\/script>\n')
             }
         </script>
         
         <script>
             if (datefield.type!="date"){ //if browser doesn't support input type="date", initialize date picker widget:
                 jQuery(function($){ //on document.ready
                        $('#eventdate').datepicker();
                        })
             }
         </script>
    </head>
	<script>
	
		
	$(document).ready( function() {
	
    var now = new Date();
    var day = ("0" + now.getDate()).slice(-2);
    var month = ("0" + (now.getMonth() + 1)).slice(-2);
    var today = now.getFullYear()+"-"+(month)+"-"+(day) ;
    $('#eventdate').val(today);
	
	 
    
});

function renderIndexPage() {
		  if(login == "1")
		  location.href = "index.html?login=1&userid="+user;
		  else
		  location.href = "index.html?login=0";
	    }
		function renderContactPage() {
		  if(login == "1")
		  location.href = "contact.html?login=1&userid="+user;
		  else
		  location.href = "contact.html?login=0";
	    }
		function renderAboutPage() {
		  if(login == "1")
		  location.href = "pages-about-us.html?login=1&userid="+user;
		  else
		  location.href = "pages-about-us.html?login=0";
	    }
		function renderTeamPage() {
		  if(login == "1")
		  location.href = "pages-about-us.html?login=1&userid="+user;
		  else
		  location.href = "pages-about-us.html?login=0";
	    }
		function renderBusinessLocations() {
		  if(login == "1")
		  location.href = "locations-by-theme.html?date=01/12/2016&themeSelected=Business&guestesCount=All&login=1&userid="+user;
		  else
		  location.href = "locations-by-theme.html?date=01/12/2016&themeSelected=Business&guestesCount=All&login=0";
	    }
		function renderWeddingLocations() {
		  if(login == "1")
		  location.href = "locations-by-theme.html?date=01/12/2016&themeSelected=Wedding&guestesCount=All&login=1&userid="+user;
		  else
		  location.href = "locations-by-theme.html?date=01/12/2016&themeSelected=Wedding&guestesCount=All&login=0";
	    }
		function renderCulturalLocations() {
		  if(login == "1")
		  location.href = "locations-by-theme.html?date=01/12/2016&themeSelected=Cultural&guestesCount=All&login=1&userid="+user;
		  else
		  location.href = "locations-by-theme.html?date=01/12/2016&themeSelected=Cultural&guestesCount=All&login=0";
	    }
		function renderBirthdayLocations() {
		  if(login == "1")
		  location.href = "locations-by-theme.html?date=01/12/2016&themeSelected=Birthday&guestesCount=All&login=1&userid="+user;
		  else
		  location.href = "locations-by-theme.html?date=01/12/2016&themeSelected=Birthday&guestesCount=All&login=0";
	    }
		function renderServices() {
		  if(login == "1")
		  location.href = "services.html?login=1&userid="+user;
		  else
		  location.href = "services.html?login=0";
	    }

	function loadTheme(){	
	    if(login == "1") {
		var date=$('#eventdate').val();
		var themeSelected=$("#theme option:selected").text();
		var guestesCount=$("#capacity option:selected").text();;
		location.href='locations-by-theme.html?date='+date+"&themeSelected="+themeSelected+"&guestesCount="+guestesCount + "&login=1&userid="+user;
		}
		else {
		var date = $('#eventdate').val();
		var themeSelected=$("#theme option:selected").text();
		var guestesCount=$("#capacity option:selected").text();;
		location.href='locations-by-theme.html?date='+date+"&themeSelected="+themeSelected+"&guestesCount="+guestesCount + "&login=0";
		}
	}
	</script>
    <body>
        <div id="body_bg">
            <div id="container_header" class="container">
                <div id="header" class="row">
                    <div class="col-md-12 margin-top-15">
                        <!-- Header Social Icons -->
                        <ul class="social-icons circle pull-right">
                            <li class="social-twitter">
                                <a href="https://twitter.com/" target="_blank" title="Twitter"></a>
                            </li>
                            <li class="social-facebook">
                                <a href="https://www.facebook.com/" target="_blank" title="Facebook"></a>
                            </li>
                            <li class="social-googleplus">
                                <a href="https://plus.google.com/" target="_blank" title="GooglePlus"></a>
                            </li>
                        </ul>
                        <!-- End Header Social Icons -->
                    </div>
                    <div class="clear"></div>
                </div>
            </div>
            <div class="primary-container-group">
                <!-- Background -->
                <div class="primary-container-background">
                    <div class="primary-container"></div>
                    <div class="clearfix"></div>
                </div>
                <!--End Background -->
                <div class="primary-container">
                    <div id="container_hornav" class="container no-padding">
                        <!-- Logo -->
                        <div class="logo">
                            <a id = "image" onClick="renderIndexPage()">
                                <img src="assets/img/logo1.png" alt="Eclectic Logo" />
                            </a>
                        </div>
                        <!-- End Logo -->
                        <!-- Slogan -->
                        <p class="site-slogan">EVENT PLANNERS</p>
                        <!-- End Slogan -->
                        <!-- Top Menu -->
                        <div class="row">
                            <div class="hornav-block">
                                <div id="hornav" class="pull-right">
                                    <ul id="hornavmenu" class="nav navbar-nav">
                                        <li>
                                            <a href = "#" id = "home-index" onClick="renderIndexPage()">Home</a>
                                        </li>
                        
                                        <li>
                                            <a href = "#" id = "philosophy" onClick="renderAboutPage()">About</a>
                                            
                                        </li>
                                        <li>
                                            <span>Event Locations</span>
                                            <ul>
                                                <li>
                                                    <a  href = "#" class = "business-locations" onClick="renderBusinessLocations()">Business</a>
                                                </li>
                                                <li>
                                                    <a href = "#" class = "wedding-locations" onClick="renderWeddingLocations()">Wedding</a>
                                                </li>
												<li>
                                                    <a href = "#" class = "cultural-locations" onClick="renderCulturalLocations()">Cultural</a>
                                                </li>
												<li>
                                                    <a href = "#" class = "birthday-locations" onClick="renderBirthdayLocations()">Birthday</a>
                                                </li>
                                            </ul>
                                        </li>
                                        <li>
                                            <!-- <span>Services</span>
                                             <ul>
                                             <li>
                                             <a href="food.html">Food</a>
                                             </li>
                                             <li>
                                             <a href="music.html">Live Music</a>
                                             </li>
                                             </ul> -->
                                            <a href = "#" id ="services" onClick="renderServices()">Services</a>                                        </li>
                                        <li>
                                            <a href = "#" id ="contact" onClick="renderContactPage()">Contact</a>
                                        </li>
                                        <li id="login-btn">
                                            <a href="pages-login.html">Login</a>
                                        </li>
                                        <li id = "account-btn" style="display:none">
                                            <span id = "name">My Account</span>
                                            <ul>
                                                <li>
                                                    <a href = "#" class = "account-details" onClick="renderAccountDetails()">My Account</a>
                                                </li>
												<li>
                                                    <a href="index.html?login=0" id = "signout">Signout</a>
                                                </li>
                                            </ul>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                            <div class="clearfix"></div>
                        </div>
                        <!-- End Top Menu -->
                    </div>
                    <div class="container">
                        <!-- === END HEADER === -->
                        <!-- === BEGIN CONTENT === -->
                        <div class="row margin-vert-30">
                            <h2>
                                Location Details
                            </h2>
                                <div class="col-md-12">
                                   <div class="panel panel-default">
                                       <div class="panel-heading">
                                           <td class="customcol"><b>Date:</b>
                                                <input type="date" id="eventdate" style="height:30px">
                                            </td>
                                            <td>
                                                <input type="button" class="btn btn-success" value="Reserve" onclick="reserveVenue()" style="float: right; border-radius: 0px;background-color:#8270a4; border-color:#8270a4">
                                            </td>
                                           
                                        </div>
                                    </div>
                                    <div class="row margin-vert-20">
                                        <div class="col-md-6">
                                            <div class="panel panel-default">
                                                <div class="panel-body">
                                                    <table class="table table-striped" style="margin-bottom: 20px; box-shadow: 0 1px 1px rgba(0, 0, 0, 0.05);  border: 1px solid #dddddd;">
                                                           <tbody><tr><td>Location Name:</td><td id="locname"></td></tr>
                                                                <tr><td>Venue Type:</td><td id="loctype"></td></tr>
                                                                <tr><td>Address:</td><td id="locaddr"></td></tr>
                                                                <tr><td>Occupancy:</td><td id="capacity"></td></tr>
                                                                <tr><td>Price per day:</td><td id="price"></td></tr>
                                                                <tr><td>Amenities</td><td id="amenities"></td></tr>
                                                            </tbody>
                                                    </table>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <!-- Carousel Slideshow -->
                                            <div id="carousel-example-2" class="carousel slide" data-ride="carousel">
                                                <!-- Carousel Indicators -->
                                                <ol class="carousel-indicators">
                                                    <li data-target="#carousel-example-1" data-slide-to="0" class="active"></li>
                                                    <li data-target="#carousel-example-2" data-slide-to="1" class=""></li>
                                                </ol>
                                                <!-- End Carousel Indicators -->
                                                <!-- Carousel Images -->
                                                <div class="carousel-inner" style="height:300px;">
                                                    <div class="item next left">
                                                        <img id="img1" class="img-thumbnail" src="" alt = "image1">
                                                            </div>
                                                    <div class="item active left">
                                                        <img id="img2" class="img-thumbnail" src="" alt="image2">
                                                            </div>
                                                </div>
                                                <!-- End Carousel Images -->
                                                <!-- Carousel Controls -->
                                                <a class="left carousel-control" href="#carousel-example-2" data-slide="prev">
                                                    <span class="glyphicon glyphicon-chevron-left"></span>
                                                </a>
                                                <a class="right carousel-control" style="margin-right:25px;" href="#carousel-example-2" data-slide="next">
                                                    <span class="glyphicon glyphicon-chevron-right"></span>
                                                </a>
                                                <!-- End Carousel Controls -->
                                            </div>
                                            <!-- End Carousel Slideshow -->
                                        </div>
                                    </div>
                                    <div class="location-container">
                                        <iframe id="forecast_embed" type="text/html" frameborder="0" src="" width="500px" height="300px"> </iframe>
                                    </div>
                                    <div>
                                            <h2>Details</h2>
                                            <p id="details"></p>
                                            <h3>Click <a data-toggle="modal" data-target=".bs-example-modal-lg">here </a> to get a virtual tour of this location.</h3>
                                            <div class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true">
                                                <div class="modal-dialog modal-lg">
                                                    <div class="modal-content" id="myModal" style="width=90%;">
                                                        <button type="button" class="close" data-dismiss="modal" style="margin-right:20px;margin-top:20px">&times;</button>
                                                        <ul class="nav nav-tabs">
                                                            <li class="active"><a data-toggle="tab" href="#inside"><h3>Inside View</h3></a></li>
                                                            <li><a data-toggle="tab" href="#outside"><h3>Outside View</h3></a></li>
                                                        </ul>
                                                        
                                                        <div class="tab-content">
                                                            <div id="inside" class="tab-pane fade in active">
                                                                <img id="DiVR"src="./assets/img/comingSoon.jpg" alt="coming soon" hidden>
                                                                    <iframe width="100%" height="500px" allowfullscreen frameborder="0" id= "iVR"></iframe>
                                                            </div>
                                                            <div id="outside" class="tab-pane fade">
                                                                <img id="DoVR" src="./assets/img/comingSoon.jpg" alt="coming soon" hidden>
                                                                    <iframe width="100%" height="500px" allowfullscreen frameborder="0" id= "oVR"></iframe>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <hr>
                                            <div>
                                                <h2>Location</h2>
												<div id="map"></div>
											</div>
                                        <!-- End Default Panel -->
                                       
									</div>
								</div>
							</div>
                    </div>
                        <!-- === END CONTENT === -->
                        <!-- === BEGIN FOOTER === -->
                    <div id="base" class="container padding-vert-30">
                        <div class="row">
                            <!-- Disclaimer -->
                            <div class="col-md-6">
                                <h3 class="margin-bottom-10">Disclaimer</h3>
                                <p style="text-align:justify">All images on this website are for presentation/demonstration purposes only for CMPE 280 course in San Jose State University, intended to represent a live site and have not been bought or solicitated.</p>
                                <p style="text-align:justify">Most of the images used here are available from
                                <a class="nobold" href="https://www.google.com/" target="_blank">google.com</a>. If you wish to purchase them from their copyright owners please visit the appropriate websites. We hold no responsibilty of the images or template or video.</p>
                                <div class="clearfix"></div>
                            </div>
                            <!-- End Disclaimer -->
                            <!-- Contact Details -->
                            <div class="col-md-3">
                                <h3 class="margin-bottom-10">Contact Details</h3>
                                <p>One Washington Square,
                                <br />San Jose, CA
                                <br />95192
                                </p>
                                <p>Email:
                                <a id = "help" onClick="renderContactPage()" href = "#">info@eclectic.com</a>
                                <br />Website:
                                <a id = "website"onClick="renderIndexPage()" href = "#">www.eclectic.com</a>
                                </p>
                            </div>
                            <!-- End Contact Details -->
                            <div class="container padding-vert-30">
                                <div class="row">
                                    <div id="copyright">
                                        <p>(c) 2016 Eclectic Copyright Info</p>
                                    </div>
                                </div>
                            </div>
                        </div>
        <!-- JS -->
		<script src="https://ajax.aspnetcdn.com/ajax/jQuery/jquery-3.1.1.min.js"></script>
		<script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAPrFaqptBZTrKq9psSASrZc9-jwrmndoY&callback=initMap"></script>
		<script type="text/javascript" src="./assets/json/eventlocations.js"></script>
		<script>
		
		var id= getQueryVariable("id");
		var name = "", type = "", address = "", locInfo = "", point = "", amenities = "", details = "", capacity = 0, price = 0, lat = "", lng = "";
		var file = "";
		
		var json = JSON.parse(locations);
		
		$('#myModal').on('show.bs.modal', function () {
			$(this).find('.modal-content').css({
				  'max-height':'100%'
		   });
		});
		
		for(i=0; i < json.location.length; i++) {
		
			locId = json.location[i].id;
			if (locId == id) {
				//console.log("locs: "+JSON.stringify(json.location[i]));
				
				name = json.location[i].name;
				type = json.location[i].type;
				address = json.location[i].address;
				capacity = json.location[i].capacity;
				price = json.location[i].price;
				lat = json.location[i].latitude;
				lng = json.location[i].longitude;
				file = json.location[i].vr;
				
				point = {lat: json.location[i].latitude, lng: json.location[i].longitude};
				var wifi = json.location[i].wifi;
				var av = json.location[i].av;
				var food = json.location[i].food;
				var pool = json.location[i].pool;
				var handicap = json.location[i].handicap;
				var outdoor = json.location[i].outdoor;
				var valet = json.location[i].valet;
				var views = json.location[i].views;
				details = json.location[i].desc;
				if (wifi == 1)
					amenities = amenities + 'WiFi,&nbsp;';
				if (av == 1)
					amenities = amenities + 'A/V Equipment,&nbsp;';
				if (food == 1)
					amenities = amenities + 'In-House Catering,&nbsp;';
				if (pool == 1)
					amenities = amenities + 'Pool,&nbsp;';
				if (handicap == 1)
					amenities = amenities + 'Handicap Accessible,&nbsp;';
				if (outdoor == 1)
					amenities = amenities + 'Outdoor,&nbsp;';
				if (valet == 1)
					amenities = amenities + 'Valet Parking,&nbsp;';
				if (views == 1)
					amenities = amenities + 'Great Views,&nbsp;';
			}
			amenities = amenities;
			$('#locname').html(name);
			$('#loctype').html(type);
			$('#locaddr').html(address);
			$('#capacity').html(capacity);
			$('#price').html(price);
			$('#amenities').html(price);
			$('#img1').attr("src","assets/img/locations/" + id + "_1.jpg");
			$('#img2').attr("src","assets/img/locations/" + id + "_2.jpg");
			$('#amenities').html(amenities);
			$('#details').html(details);
			src = "https://forecast.io/embed/#lat=" + lat + "&lon=" + lng;
			$('#forecast_embed').attr("src",src);
		}
        
		if(file){
			
			$("#iVR").attr('src',"https://varshakodali.github.io/vrview/?image=examples/gallery/"+file+"-inside.jpg"); 
			$("#oVR").attr('src',"https://varshakodali.github.io/vrview/?image=examples/gallery/"+file+"-outside.jpg"); 
			$("#DiVR").hide();
			$("#DoVR").hide();
			$("#iVR").show();
			$("#oVR").show();
		}else{
			$("#iVR").hide();
			$("#oVR").hide();
			
			$("#DiVR").show();
			$("#DoVR").show();
		}
		  
		function initMap() {
			var map = new google.maps.Map(document.getElementById('map'), {
				zoom: 9,
				center: point
			});
			var marker = new google.maps.Marker({position: point,
												 map: map,
												});
		}
		</script>
        <script type="text/javascript" src="./assets/js/jquery.min.js" type="text/javascript"></script>
        <script type="text/javascript" src="./assets/js/bootstrap.min.js" type="text/javascript"></script>
        <!-- Isotope - Portfolio Sorting -->
        <script type="text/javascript" src="./assets/js/jquery.isotope.js" type="text/javascript"></script>
        <!-- Mobile Menu - Slicknav -->
        <script type="text/javascript" src="./assets/js/jquery.slicknav.js" type="text/javascript"></script>
         <script>
		 	$(document).ready( function() {
				var now = new Date();
				var day = ("0" + now.getDate()).slice(-2);
				var month = ("0" + (now.getMonth() + 1)).slice(-2);
				var today = now.getFullYear()+"-"+(month)+"-"+(day) ;
				$('#eventdate').val(today); 
				
				var login = getQueryVariable("login");
				var user = getQueryVariable("userid");
					if(login == false || login == null)
					login = "0";
					
					if(login == "1") {
					
								$("#login-btn").hide();
								$("#account-btn").show();
								var user = getQueryVariable("userid");
								
								$("#name").html(user);
							}
    
				
				
				var loc_id = getQueryVariable("id");
				 user = getQueryVariable("userid"); // user variable is already declared in the aove statements
				var dataString = 'user='+user+'&loc_id='+loc_id;
				var url = 'http://ec2-54-183-40-122.us-west-1.compute.amazonaws.com/php/update_recent.php';
				var oReq = CreateXMLHttpRequest();
				oReq.open("POST",url,true);
				if(oReq!=null){
					oReq.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');
					oReq.onreadystatechange = function() {
						if(oReq.readyState == 4 && oReq.status == 200) {
							var json = JSON.parse(oReq.responseText);
							var op = json.operation;
						}
					}
					oReq.send(dataString);
				}
			});
		
		function CreateXMLHttpRequest() {
			if (typeof XMLHttpRequest != "undefined") {
				//All modern browsers (IE7+, Firefox, Chrome, Safari, and Opera) uses XMLHttpRequest object
				return new XMLHttpRequest();
			}
			else if (typeof ActiveXObject != "undefined") {
				//Internet Explorer (IE5 and IE6) uses an ActiveX Object
				return new ActiveXObject("Microsoft.XMLHTTP");
			} else {
				throw new Error("XMLHttpRequestnot supported");
			}
		}
		
		function reserveVenue() {
			var eventdate = $('#eventdate').val();
			var loc_id = getQueryVariable("id");
			var user = getQueryVariable("userid");
            var login = getQueryVariable("login");
			var dataString = 'eventdate='+eventdate+"&loc_id="+loc_id+"&user="+user;
			var url = 'http://ec2-54-183-40-122.us-west-1.compute.amazonaws.com/php/insert_booking.php';
				var oReq = CreateXMLHttpRequest();
				oReq.open("POST",url,true);
				if(oReq!=null){
					oReq.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');
					oReq.onreadystatechange = function() {
					if(oReq.readyState == 4 && oReq.status == 200) {
						var json = JSON.parse(oReq.responseText);
						var op = json.operation;
						var info = json.Booking;
						if(op === "Ok")
							displayInfo(info);
						else if(op === "Error")
							alert("No bookings recorded");
				    }
					}
				oReq.send(dataString);
				}
                if(login == "0") {
                    location.href="pages-login.html";
                }
                else {
                    alert("Venue reserved successfully");
                }
		}
        </script>
        <!-- Animate on Scroll-->
        <script type="text/javascript" src="./assets/js/jquery.visible.js" charset="utf-8"></script>
        <!-- Modernizr -->
        <script src="./assets/js/modernizr.custom.js" type="text/javascript"></script>
        <!-- End JS -->
    </body>
</html>
<!-- === END FOOTER === -->
